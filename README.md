# 串口数据可视化与调试工具

## 项目概述
本工具是一款基于PyQt5和Matplotlib开发的串口监控软件，支持实时接收、显示、可视化串口数据，并能将数据保存为CSV文件。适用于嵌入式开发、传感器数据采集、设备调试等场景，尤其适合配合STM32等单片机系统进行数据监控与分析。

## 功能特点
- 实时监控串口数据，支持多种波特率配置
- 数据可视化展示，提供折线图、柱状图、散点图三种图表类型
- 支持数据发送功能，包含预设常用命令
- 数据自动保存为CSV文件，便于后续分析
- 灵活的数据解析功能，支持多列数据提取
- 详细的调试日志，方便问题排查

## 环境要求
- Python 3.6及以上版本
- 所需Python库：
  - PyQt5：用于GUI界面
  - matplotlib：用于数据可视化
  - pyserial：用于串口通信
  - numpy：用于数据处理

## 安装方法
1. 克隆或下载本项目代码
2. 安装依赖库：
   ```bash
   pip install -r requirements.txt
   ```
3. 运行主程序：
   ```bash
   python serial_monitor.py
   ```

## 使用指南

### 基本操作流程
1. 连接串口设备到电脑
2. 打开软件，在"串口设置"区域点击"刷新端口"
3. 选择对应的串口号和波特率（默认9600）
4. 点击"连接"按钮建立串口连接
5. 接收数据将自动显示在"数据显示"区域并绘制图表

### 详细功能说明

#### 1. 串口设置
- **串口号**：显示当前可用的串口设备，点击"刷新端口"可更新列表
- **波特率**：支持9600、115200、38400、57600、4800等常用波特率
- **连接/断开**：建立或关闭与所选串口的连接

#### 2. 数据发送
- 可直接在输入框中输入要发送的数据，点击"发送"按钮发送
- 也可从预设命令列表中选择常用命令发送
- 发送的内容会显示在数据显示区域，前缀为"发送:"

#### 3. CSV存储
- **选择CSV文件**：点击按钮选择保存路径和文件名
- **CSV表头**：可自定义CSV文件的表头（默认"时间,数值"）
- **保存数据到CSV**：勾选后，接收的数据将自动保存到指定CSV文件

#### 4. 数据显示
- 接收和发送的数据会实时显示在文本区域
- 点击"清空显示"可清除当前显示内容

#### 5. 数据解析
- **分隔符**：用于分割多值数据的符号（如逗号、空格等），为空时解析为单一数值
- **数据列**：指定要显示和绘图的数据列索引（从0开始）

#### 6. 图表显示
- **图表类型**：支持折线图、柱状图、散点图三种显示方式
- **刷新间隔**：可调整图表更新频率（100ms-2000ms）
- 图表会自动缩放以适应数据范围，并显示网格线

#### 7. 调试信息
- 显示软件运行过程中的详细日志，包括数据接收、解析结果等
- 提供"测试图表"功能，用于验证图表显示是否正常
- "显示缓冲区"按钮可查看当前缓存的所有数据点信息

## 注意事项
1. 确保串口设备驱动已正确安装
2. 连接串口前请确认设备已正确连接到电脑
3. 保存CSV文件时，请确保有对应路径的写入权限
4. 解析多列数据时，需正确设置分隔符和数据列索引
5. 大量数据接收时，可适当增大刷新间隔以提高性能

## 常见问题
- **无法找到串口**：检查设备是否连接、驱动是否安装，点击"刷新端口"重试
- **数据乱码**：检查波特率是否与设备一致，确保数据编码为UTF-8
- **图表无显示**：确认已正确设置数据解析参数，检查是否有数据接收
- **CSV保存失败**：检查文件路径是否正确，是否有写入权限

## 定制与扩展
- 可在`send_commands`列表中添加常用命令
- 如需支持更多数据格式，可修改`update_data`函数中的数据解析部分
- 可通过调整`buffer_size`变量修改数据缓存大小
